# v1.0.0 Changelog (MVP Release)

**Release Date:** 2026-01-09
**Status:** Production-ready

## Overview

The MVP release provides full-featured Australian GST and tax management for freelancers. Includes comprehensive CRUD operations, CSV import with fuzzy matching, BAS/FY reporting with PDF export, and a polished web UI with dark mode support.

---

## Backend Features

### Core Entities

**Categories Module** (`src/modules/categories`)
- CRUD operations for expense categories
- Seed data for default ATO-compliant categories
- BAS label mapping (G1, G10, G11)

**Providers Module** (`src/modules/providers`)
- CRUD operations for service providers
- International provider flag for GST auto-calculation
- Fuzzy matching with Levenshtein distance + aliases

**Clients Module** (`src/modules/clients`)
- CRUD operations for freelance clients
- PSI (Personal Services Income) eligibility tracking
- Encrypted storage for client names and ABN

**Expenses Module** (`src/modules/expenses`)
- Full CRUD with validation
- AES-256-GCM encryption for sensitive fields
- GST auto-calculation (domestic: 10%, international: 0%)
- Business use percentage tracking
- FY and quarter auto-detection

**Incomes Module** (`src/modules/incomes`)
- Full CRUD for invoices and payments
- Paid status tracking
- PSI calculation integration
- Client relationship management

### Reports

**BAS Module** (`src/modules/bas`)
- Quarterly BAS summary calculations
- G1 (Total Sales), 1A (GST on Sales), 1B (GST on Purchases)
- Automatic FY and quarter detection
- Support for custom date ranges

**FY Reports Module** (`src/modules/fy-reports`)
- Annual financial year reports
- PDF generation with comprehensive breakdowns
- Income vs expenses summary
- Category-based expense analysis

### CSV Import

**CSV Import Module** (`src/modules/csv-import`)
- Bulk import for expenses and incomes
- Support for CommBank, Amex, and custom formats
- Duplicate detection (same date, amount, provider/client)
- Provider fuzzy matching (Levenshtein + aliases)
- Client fuzzy matching (in-memory for encrypted names)
- Business use percentage application
- Preview mode with dry-run capability
- ImportJob entity for tracking and rollback

**Custom Validators** (`src/modules/csv-import/validators`)
- CsvFileValidator for extension-based file validation
- Comprehensive test coverage (8 tests)

### Common Infrastructure

**Encryption** (`src/common/transformers`)
- EncryptedColumnTransformer with AES-256-GCM
- Individual IV (Initialization Vector) per field
- Secure key management via environment variables

**Money Service** (`src/common/services/money.service.ts`)
- All currency values stored as cents (integers)
- Decimal.js for precise calculations
- GST calculation helpers
- Business percentage calculations

**FY Helper** (`src/common/utils/fy-helper.ts`)
- Australian financial year detection (July 1 - June 30)
- Quarter calculation (Q1-Q4)
- Date range utilities
- Comprehensive test coverage

### Testing

**Backend Tests:** 500 tests across 18 test suites
- Unit tests for all services
- Integration tests for controllers
- E2E tests for critical flows
- 100% coverage on money calculations

---

## Frontend Features

### Core UI

**Dashboard** (`web/src/features/dashboard`)
- BAS summary with current quarter GST position
- Recent expenses and incomes
- Quick actions (Add Expense, Add Income, Import CSV)
- GST payable/refundable indicator

**Expenses Module** (`web/src/features/expenses`)
- Full CRUD with modal forms
- Searchable provider dropdown (ARIA combobox)
- Client-side filtering and sorting
- Pagination (25 items per page)
- GST and business percentage calculation
- Date picker integration
- Responsive table design

**Incomes Module** (`web/src/features/incomes`)
- Full CRUD with modal forms
- Searchable client dropdown
- Paid status toggle
- PSI calculation indicator
- Client-side filtering and sorting
- Pagination (25 items per page)

**CSV Import** (`web/src/features/import`)
- Unified import page with route-based tabs
- Auto-detection of CSV type (expenses vs incomes)
- File drag-and-drop with smart routing
- Preview with validation
- Row-level include/exclude toggle
- Duplicate warnings
- Inline provider/client creation
- Import progress and results
- Import jobs history with pagination

### Settings

**Providers Management** (`web/src/features/settings/providers`)
- CRUD operations
- International flag toggle
- Sortable table with search
- Related expenses count

**Categories Management** (`web/src/features/settings/categories`)
- CRUD operations
- BAS label display
- Sortable table

**Clients Management** (`web/src/features/settings/clients`)
- CRUD operations
- ABN formatting (12 345 678 901)
- PSI eligible badge
- Related incomes count
- Encryption notices

### Reports

**BAS Reports** (`web/src/features/reports/bas`)
- Quarterly BAS summary
- G1, 1A, 1B calculations with explanations
- PDF download functionality
- Custom quarter selection

**FY Reports** (`web/src/features/reports/fy`)
- Annual financial year summary
- Income vs expenses breakdown
- Category-based analysis
- PDF download functionality
- Custom FY selection

### Infrastructure

**Build & Tooling:**
- React 19 + Vite 7
- TypeScript 5.9 (strict mode)
- Tailwind CSS 4.x with CSS-driven config
- pnpm workspace monorepo

**Data Fetching** (`web/src/lib/query-client.ts`)
- TanStack Query v5 for caching and state management
- Optimistic updates for all mutations
- Automatic cache invalidation
- Error handling with retries

**Styling:**
- shadcn-style UI primitives
- Dark mode toggle with localStorage persistence
- Responsive design (mobile-first)
- WCAG AA color contrast compliance

**Notifications** (`web/src/components/ui/toast-provider.tsx`)
- Toast notifications with auto-dismiss
- Variant-based durations (success: 4s, error: 8s)
- Progress bar with pause on hover
- Toast stacking (max 5)
- Undo actions for destructive operations

**Routing** (`web/src/App.tsx`)
- React Router v6 with lazy loading
- Route-based code splitting
- 404 error page
- Protected routes (future auth)

**Error Handling:**
- Error boundary for uncaught exceptions
- API error toast notifications
- Field-level validation errors
- Loading skeletons for better UX

### Testing

**Frontend Tests:** 482 tests (Vitest)
- Component tests with React Testing Library
- Hook tests with renderHook
- Integration tests with MSW (Mock Service Worker)
- Accessibility tests with jest-dom

**E2E Tests:** 62 tests (Playwright, 98.4% pass rate)
- Critical user flows (create expense, import CSV, generate BAS)
- Cross-browser testing (Chromium, Firefox, WebKit)
- Mobile viewport testing

---

## Technical Stack

### Backend
- **Runtime:** Node.js 20 LTS
- **Framework:** NestJS 10.x
- **Database:** PostgreSQL 15 (Docker)
- **ORM:** TypeORM 0.3.x
- **Validation:** class-validator
- **Math:** Decimal.js for currency calculations
- **Encryption:** Node.js crypto (AES-256-GCM)
- **Testing:** Jest
- **API Docs:** Swagger (OpenAPI 3.0)

### Frontend
- **Build:** Vite 7
- **Framework:** React 19
- **Language:** TypeScript 5.9 (strict)
- **Styling:** Tailwind CSS 4.x
- **Routing:** React Router v6
- **Forms:** React Hook Form + Zod
- **Data:** TanStack Query v5
- **Testing:** Vitest + React Testing Library + Playwright
- **Icons:** Lucide React

### Infrastructure
- **Container:** Docker Compose
- **Package Manager:** pnpm 9.x
- **Node Manager:** fnm
- **Deployment:** Production Docker build with nginx
- **Reverse Proxy:** Traefik with HTTPS

---

## Deployment

**Production Build:**
- Gzip compression enabled
- SPA routing fallback for React Router
- API proxy configuration (`/api/*` → backend)
- Environment-based configuration
- Health check endpoints

**Docker Compose:**
- Multi-stage builds for minimal image size
- PostgreSQL with persistent volume
- Backend API container
- Frontend nginx container
- Traefik integration for HTTPS

---

## Documentation

**Core Documentation:**
- `README.md` - Setup and installation instructions
- `ARCHITECTURE.md` - System design and tech stack
- `PATTERNS.md` - Implementation patterns and conventions
- `TROUBLESHOOTING.md` - Common issues and solutions
- `ATO-LOGIC.md` - Australian tax calculation rules
- `SCHEMA.md` - Database structure and relationships
- `SECURITY.md` - Encryption and key management
- `BACKUP.md` - Infrastructure and backup procedures

**User Documentation:**
- Environment variables documented in `.env.example`
- Keyboard shortcuts documented
- Screenshots captured (8 total: 7 dark mode, 1 light mode)

---

## Key Achievements

✅ **100% Type Safe** - Zero `any` types across entire codebase
✅ **Encrypted by Default** - All PII encrypted at rest (AES-256-GCM)
✅ **Australian Tax Compliant** - Follows ATO GST and BAS rules
✅ **Accessible** - WCAG AA compliant, keyboard navigable, screen reader tested
✅ **Tested** - 1044 total tests (500 backend + 482 frontend + 62 E2E)
✅ **Production Ready** - Deployed with Docker, HTTPS, monitoring

---

## Breaking Changes

None (initial release)

---

## Migration Guide

This is the initial release. No migration required.

---

## For Implementation Details

See the following documentation:
- **Architecture:** `docs/core/ARCHITECTURE.md`
- **Patterns:** `docs/core/PATTERNS.md`
- **Troubleshooting:** `docs/core/TROUBLESHOOTING.md`
- **Australian Tax Rules:** `docs/core/ATO-LOGIC.md`
- **Database Schema:** `docs/core/SCHEMA.md`

---

## Next Release

See `NEXT-TASKS.md` for v1.2.0 UX Enhancements (keyboard shortcuts, bulk operations, advanced filtering).

